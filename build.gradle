description = "Easy for Spring Boot: Build"

// Include gradle
ext {
    repositoriesGradle = "${project.rootDir}/buildSrc/repositories.gradle"
    deployJavaGradle = "${project.rootDir}/buildSrc/deploy-java.gradle"
    deployPlatformGradle = "${project.rootDir}/buildSrc/deploy-platform.gradle"
    compileKotlinGradle = "${project.rootDir}/buildSrc/compile-kotlin.gradle"
    passwordGradle = "${project.rootDir}/buildSrc/password.gradle"
}

// Personal info
// Note overwrite these if your info are not same with me
ext {
    userHomePath = System.getProperty("user.home")
    userAuthPath = "${userHomePath}/Home/Auth"
}

group = projectGroup
version = (Boolean.parseBoolean(snapshot) ? projectVersion : "${projectVersion}-SNAPSHOT")

allprojects { project ->
    processProjectInfo(project)
}

subprojects {
}

def processProjectInfo(Project project) {
    if (project == rootProject) {
        // nop
    } else if (project.group == "easy-spring-boot-build.spring-boot-sample") {
        project.group = sampleProjectGroup
        project.version = sampleProjectVersion
    } else {
        project.group = projectGroup
        project.version = projectVersion
    }
    println("Configure ${project.group}:${project.name}:${project.version}")
}

apply from: passwordGradle